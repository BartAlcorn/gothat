package build

import (
	"log"
	"os"
)

func Concat(outpath string, outfile string, files []string) error {
	var err error
	output := "// ** This file is generated by gothat **\n"
	for _, file := range files {
		output += "// ** " + file + " **\n"
		data, err := os.ReadFile(file)
		if err != nil {
			log.Println("error reading file", file, err)
		}
		output += string(data)
	}

	EnsurePath(outpath)
	err = os.WriteFile(outpath+"/"+outfile, []byte(output), 0666)

	return err
}
